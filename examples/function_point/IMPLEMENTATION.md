# 功能点评估实现方案

## 1. 任务定义

### 1.1 问题描述
给定需求文档和候选功能点，判断该功能点是否构成ILF（内部逻辑文件）。

### 1.2 输入输出
**输入**：
- 需求文档文本
- 候选功能点名称及其属性描述

**输出**：
- 判断结果：是/否
- 判断理由：简要说明判断依据

### 1.3 判断标准
根据IFPUG标准，ILF需满足以下三个条件：
1. 是用户可识别的逻辑相关数据组
2. 在应用边界内维护
3. 通过应用的基本流程维护

## 2. 评分规则

### 2.1 二元评分（1分）
- 判断正确：1分
- 判断错误：0分

### 2.2 评分说明
1. 只关注最终判断结果（是/否）的正确性
2. 不考虑理由的完整性和质量
3. 答案与标准答案完全匹配才得分
4. 所有示例的得分相加为最终得分

## 3. 提示工程设计

### 3.1 IO（直接输入输出）
```
你是一个IFPUG功能点分析专家。请判断给定的功能点是否构成内部逻辑文件（ILF）。
只需回答"是"或"否"。

[需求文档]
{requirement_text}

[候选功能点]
名称：{candidate_name}
```

### 3.2 COT（思维链）
```
你是一个IFPUG功能点分析专家。请判断给定的功能点是否构成内部逻辑文件（ILF）。
请按照以下步骤进行分析：

1. 首先，判断是否是用户可识别的逻辑相关数据组
2. 然后，判断是否在应用边界内维护
3. 最后，判断是否通过应用的基本流程维护
4. 根据以上分析，得出最终结论

[需求文档]
{requirement_text}

[候选功能点]
名称：{candidate_name}

请按以下格式输出：
思考过程：
1. [分析第一个条件]
2. [分析第二个条件]
3. [分析第三个条件]
4. [得出结论]

最终答案：[是/否]
```

### 3.3 TOT（思维树）
```
你是一个IFPUG功能点分析专家。请判断给定的功能点是否构成内部逻辑文件（ILF）。
请使用思维树方法进行分析：

[需求文档]
{requirement_text}

[候选功能点]
名称：{candidate_name}

请按以下格式输出：

1. 初步判断
   1.1 [第一印象]
   1.2 [可能的问题]

2. 深入分析
   2.1 数据组特征
       - [分析数据的逻辑相关性]
       - [分析用户可识别性]
   2.2 维护方式
       - [分析应用边界]
       - [分析维护流程]

3. 反向验证
   3.1 [考虑相反情况]
   3.2 [验证是否有遗漏]

4. 最终结论
   [是/否]
```

### 3.4 GOT（思维图）
```
你是一个IFPUG功能点分析专家。请使用思维图方法判断给定的功能点是否构成内部逻辑文件（ILF）。

[需求文档]
{requirement_text}

[候选功能点]
名称：{candidate_name}

请按以下步骤分析：

1. 需求分解
- 识别关键数据实体
- 分析数据关系
- 标注维护方式

2. 多路径验证
路径1：从用户视角
- 数据组是否满足业务需求
- 用户是否能识别此数据组

路径2：从系统视角
- 数据是否在应用边界内
- 是否有完整的维护流程

路径3：从IFPUG规则视角
- 检查是否符合ILF定义
- 验证是否满足所有条件

3. 结果合并
- 综合各路径结果
- 处理可能的冲突
- 得出最终判断

最终答案：[是/否]
```

## 4. 实验设计

### 4.1 实验配置
```python
EXPERIMENT_CONFIG = {
    "model": "gpt-4",           # 使用的模型
    "temperature": 0.2,         # 较低的随机性
    "max_tokens": 500,          # 输出长度限制
    "methods": ["io", "cot", "tot", "got"],  # 实验方法
    "samples": range(1, 9)      # 8个示例
}
```

### 4.2 评估方法
1. **准确率统计**：
   - 每个方法的总得分（满分8分）
   - 计算正确率（得分/总样本数）

2. **方法对比**：
   - 不同方法的得分排名
   - 错误案例分析

## 5. 预期输出

### 5.1 结果格式
```json
{
    "method": "实验方法名称",
    "results": [
        {
            "doc_id": "文档ID",
            "candidate_name": "候选功能点名称",
            "prediction": true/false,
            "ground_truth": true/false,
            "score": 1/0
        }
    ],
    "total_score": "总得分",
    "accuracy": "正确率"
}
```

### 5.2 评估报告
1. **方法比较**：
   - 各方法得分表
   - 排名情况

2. **错误分析**：
   - 各方法的错误案例
   - 错误类型统计

## 6. 后续扩展

### 6.1 近期改进
1. 提示模板优化：
   - 根据错误案例优化提示
   - 添加更多约束条件

2. 实验方法扩展：
   - 尝试不同的思维链变体
   - 组合多种方法的优点

### 6.2 长期规划
1. 支持多功能点同时判断
2. 添加功能点自动发现
3. 实现交互式分析界面 